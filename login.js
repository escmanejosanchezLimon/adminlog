let i="https://adsulfwwjlenhqbxwmyo.supabase.co/auth/v1/token?grant_type=password",s="POST",c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFkc3VsZnd3amxlbmhxYnh3bXlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mjg3ODQzMjcsImV4cCI6MjA0NDM2MDMyN30.gzUiqwnfWMxwKB8s2VH13gE8NKgu92D0ZatnmsPZ-58",d="C:/Users/50683/Desktop/EscManejo/version3/produccion/admin/principal/index.html",n="adminsanchez2025@proton.me",e="C:/Users/50683/Desktop/EscManejo/version3/produccion/user/login/login.html";async function t(e,n){try{var t,o=await fetch(i,{method:[s],headers:{"Content-Type":"application/json",apikey:c},body:JSON.stringify({email:e,password:n})});if(!o.ok)throw t=await o.json(),new Error(t.message||"Login fallido");var r=(await o.json()).access_token,a=(localStorage.setItem("AdminAccessToken",r),jwt_decode(r));"authenticated"===a.role&&(window.location.href=d)}catch(e){console.error("Error durante el login:",e),alert("Error en el login. Verifica tu nombre de usuario y contraseña.")}}function o(){var e=localStorage.getItem("AdminAccessToken");if(!e)return!0;try{var n=jwt_decode(e),t=Date.now()/1e3;return n.exp<t}catch(e){return console.error("Error al decodificar el token:",e),!0}}function r(){o()||(window.location.href=d)}function a(){var e=document.getElementById("password");document.getElementById("showPassword").checked?e.type="text":e.type="password"}function l(){alert("Opción en desarrollo")}function m(){window.location.href=e}document.getElementById("loginForm")?.addEventListener("submit",e=>{e.preventDefault();e=document.getElementById("password").value;t(n,e)}),r(),document.getElementById("hamburger-btn").addEventListener("click",function(){var e=document.getElementById("dropdown-menu");e.style.display="block"===e.style.display?"none":"block"}),document.addEventListener("click",function(e){var n=document.getElementById("dropdown-menu"),t=document.getElementById("hamburger-btn");n.contains(e.target)||t.contains(e.target)||(n.style.display="none")});